#!/bin/bash

if [[ $# -gt 1 ]]; then
    CUSTOMIZE=YES
fi

while [[ $# -gt 1 ]]; do
    WORD="$1"

    case $WORD in
        -u|--username)
            USERNAME="$2"
            shift
        ;;
        -k|--key)
            KEY="$2"
            shift
        ;;
        -g|--background)
            BACKGROUND="$2"
            shift
        ;;
        -s|--skip)
            SKIP=1
        ;;
        -i|--input)
            INPUTPATH="$2"
            shift
        ;;
        -o|--output)
            OUTPUTPATH="$2"
            shift
        ;;
        --default)
            DEFAULT=YES
        ;;
        *)

        ;;
    esac
    shift
done

if [[ -n $SKIP ]]; then
    echo "[INFO]Skipping the proxy searching process."
else
    echo "[INFO]Fetching avaliable proxies..."
    python fetch.py
    echo "[INFO]Proxy list has been output to file."
fi
if [[ ( -n $USERNAME ) && ( -n $KEY ) ]]; then
    python ./xeH.py -u $USERNAME -k $KEY $(cat urls.txt)
else
    python ./xeH.py $(cat urls.txt)
fi
